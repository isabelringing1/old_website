<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="../koi_pond/js/paper-full.js"></script>
<script type="text/paperscript" canvas="myCanvas">
	var point = view.center;
	var colors = [];
	var cycles = 4;
	for (var i = 0, l = 60; i < l; i++) {
		var brightness = 1 - (i / l) * 1.5;
		var hue = i / l * cycles * 360;
		var color = {
			hue: hue,
			saturation: 1,
			brightness: brightness
		};
		colors.push(color);
	}

	var radius = Math.max(view.size.width, view.size.height) * 0.75;

	var path = new Path.Rectangle({
		rectangle: view.bounds,
		fillColor: {
			origin: point,
			destination: point + [radius, 0],
			gradient: {
				stops: colors,
				radial: true
			}
		}
	});

	var color = path.fillColor;
	var gradient = color.gradient;
	var mouseDown = false;
	var mousePoint = view.center;

	function onMouseMove(event) {
		mouseDown = true;
		mousePoint = event.point;
	}

	function onMouseUp(event) {
		mouseDown = false;
	}

	var grow = false;
	var vector = new Point(0, 0);

	function onFrame() {
		for (var i = 0, l = gradient.stops.length; i < l; i++)
			gradient.stops[i].color.hue -= 20;
		if (grow && vector.length > 300) {
			grow = false;
		} else if (!grow && vector.length < 75) {
			grow = true;
		}
		if (mouseDown) {
			point = point + (mousePoint - point) / 10;
		} else {
			vector.length += (grow ? 0 : 0);
			vector.angle += 5;
		}
		color.highlight = mouseDown ? point : point + vector;
	}

	function onResize(event) {
		point = view.center;
		path.bounds = view.bounds;
		var color = path.fillColor;
		color.origin = point;
		var radius = Math.max(view.size.width, view.size.height) * 0.75;
		color.destination = point + [radius, 0];
	}
</script>
	
<script src="../js/glfx.js"></script>
<script src="http://code.jquery.com/jquery-1.11.0.min.js">

window.onload = function() {
    // try to create a WebGL canvas (will fail if WebGL isn't supported)
    try {
        var canvas = fx.canvas();
    } catch (e) {
        alert(e);
        return;
    }

    // convert the image to a texture
    var image = document.getElementById('image');
    var texture = canvas.texture(image);
	
    canvas.draw(texture).swirl(50, 50, 200, 4).update();
	
    image.parentNode.insertBefore(canvas, image);
    image.parentNode.removeChild(image);


    // Draw a swirl under the mouse 
   /*
   $(document).mousemove(function(e) {
	console.log("move");
        var offset = $(canvas).offset();
        var x = e.pageX - offset.left;
        var y = e.pageY - offset.top;
        canvas.draw(texture).swirl(x, y, 200, 4).update();
    });
};
*/

</script>
</head>
<body>
<canvas id="myCanvas" style = "width: 800px; height: 200px; position: absolute;"></canvas>
<img src="name.png" style = "position: absolute; z-index: 1;">
<img src="name1.png" style = "position: absolute; z-index: 1;" onmouseover="hide(this)" onmouseout="show(this)">

<script>
function hide(x) {
    x.style.opacity = 0.0;
}
function show(x) {
    x.style.opacity = 1.0;
}
</script>
<img id="image" src="me.jpeg" style = "width: 460px; height: 460px; padding-top: 250px;">
</body>
	
</html>
